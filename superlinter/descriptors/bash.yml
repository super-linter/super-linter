descriptor_id: BASH
descriptor_type: language
file_extensions:
  - ".sh"
  - ".bash"
  - ".dash"
  - ".ksh"
test_folder: shell
linters:
  # Bash Built in Linter
  - class: BashBashExecLinter
    linter_name: bash-exec
    linter_url: https://tiswww.case.edu/php/chet/bash/bashtop.html
    name: BASH_EXEC
    cli_executable_version: bash
    examples:
      - "bash-exec myfile.sh"
    install:
      dockerfile:
        - |
          RUN printf '#!/bin/bash \\n\\nif [[ -x "$1" ]]; then exit 0; else echo "Error: File:[$1] is not executable"; exit 1; fi' > /usr/bin/bash-exec \
              && chmod +x /usr/bin/bash-exec
    variables:
      - name: ERROR_ON_MISSING_EXEC_BIT
        description: If set to `false`, the `bash-exec` linter will report a warning if a shell script is not executable. If set to `true`, the `bash-exec` linter will report an arror instead
        default_value: "false"
  # Shellcheck
  - linter_name: shellcheck
    linter_url: https://github.com/koalaman/shellcheck
    name: BASH_SHELLCHECK
    cli_lint_extra_args:
      - "--color=auto"
      - "--external-sources"
    examples:
      - "shellcheck --color=auto --external-sources myfile.sh"
    install:
      dockerfile:
        - FROM koalaman/shellcheck:latest as shellcheck
        - COPY --from=shellcheck /bin/shellcheck /usr/bin/
  # SHFMT
  - linter_name: shfmt
    linter_url: https://github.com/mvdan/sh
    name: BASH_SHFMT
    cli_lint_extra_args:
      - "-d"
    test_folder: shell_shfmt
    examples:
      - "shfmt -d myfile.sh"
    install:
      dockerfile:
        - ENV GO111MODULE=on
        - RUN go get mvdan.cc/sh/v3/cmd/shfmt
